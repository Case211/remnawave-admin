# ============================================
# Конфигурация Telegram бота
# ============================================

BOT_TOKEN=your_telegram_bot_token_from_botfather

# ============================================
# Конфигурация API (Remnawave Panel)
# ============================================

API_BASE_URL=http://remnawave:3000
API_TOKEN=your_api_token

# ============================================
# Администраторы
# ============================================

# Telegram ID администраторов (через запятую)
ADMINS=123456789,987654321

# ============================================
# Локализация и логирование
# ============================================

DEFAULT_LOCALE=ru
LOG_LEVEL=INFO

# ============================================
# Уведомления (опционально)
# ============================================

# ID группы/канала для уведомлений
NOTIFICATIONS_CHAT_ID=-1001234567890

# ID топика в группе (опционально)
NOTIFICATIONS_TOPIC_ID=123

# Отдельные топики для разных типов (опционально)
NOTIFICATIONS_TOPIC_USERS=456      # События пользователей
NOTIFICATIONS_TOPIC_NODES=789      # События нод
NOTIFICATIONS_TOPIC_SERVICE=101    # Сервисные события
NOTIFICATIONS_TOPIC_HWID=102       # HWID события
NOTIFICATIONS_TOPIC_CRM=103        # CRM события
NOTIFICATIONS_TOPIC_ERRORS=104     # Ошибки
NOTIFICATIONS_TOPIC_VIOLATIONS=105 # Нарушения

# ============================================
# Webhook
# ============================================

WEBHOOK_PORT=8080
# Сгенерируйте: openssl rand -hex 64
WEBHOOK_SECRET=ваш_секретный_ключ_минимум_32_символа

# ============================================
# База данных PostgreSQL (ОБЯЗАТЕЛЬНО)
# ============================================
# Установите перед первым запуском!

POSTGRES_USER=remnawave
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=remnawave_bot

# URL подключения (должен соответствовать данным выше)
DATABASE_URL=postgresql://remnawave:your_secure_password_here@remnawave-admin-db:5432/remnawave_bot

# Пул соединений
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10

# Интервал синхронизации (секунды)
SYNC_INTERVAL_SECONDS=300

# ============================================
# GeoIP — MaxMind GeoLite2 (опционально)
# ============================================
# Без MaxMind используется ip-api.com (~1000 запросов/день).
# С MaxMind — локальная база, без лимитов, мгновенные lookup'ы.
#
# 1. Зарегистрируйтесь: https://www.maxmind.com/en/geolite2/signup
# 2. Account -> Manage License Keys -> Generate New License Key
# 3. Раскомментируйте строку ниже и вставьте ключ:

# MAXMIND_LICENSE_KEY=your_maxmind_license_key

# ============================================
# Веб-панель (опционально)
# ============================================
# Запуск: docker compose --profile web up -d

# Секретный ключ для JWT (ОБЯЗАТЕЛЬНО для веб-панели)
# Сгенерируйте: openssl rand -hex 32
WEB_SECRET_KEY=your_jwt_secret_key_here_minimum_32_chars

# Время жизни сессии
# Access token (минуты), refresh token (часы) = общее время сессии
WEB_JWT_EXPIRE_MINUTES=30
WEB_JWT_REFRESH_HOURS=6

# Порты веб-панели
WEB_BACKEND_PORT=8081
WEB_FRONTEND_PORT=3000

# CORS origins (ваш домен)
WEB_CORS_ORIGINS=https://admin.yourdomain.com

# External API v3 (disabled by default; set to true to enable public API at /api/v3)
EXTERNAL_API_ENABLED=false
# Swagger UI for External API (disabled by default; set to true to expose /api/v3/docs)
EXTERNAL_API_DOCS=false

# Username бота (без @) для Telegram Login Widget
TELEGRAM_BOT_USERNAME=your_bot_username

# Авторизация по логину/паролю
# При первом запуске администратор регистрируется через веб-интерфейс (только один раз).
# Сменить пароль можно в веб-панели: Настройки -> Смена пароля.
#
# Опционально: fallback через .env (если БД недоступна)
# WEB_ADMIN_LOGIN=admin
# WEB_ADMIN_PASSWORD=your_secure_admin_password

# Белый список IP (опционально, через запятую, поддерживается CIDR)
# Если не задан — доступ с любого IP. При указании — только с этих адресов.
# WEB_ALLOWED_IPS=1.2.3.4,10.0.0.0/24
