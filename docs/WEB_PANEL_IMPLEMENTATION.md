# üåê –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏ Remnawave Admin

> **–í–µ—Ä—Å–∏—è:** 1.0
> **–î–∞—Ç–∞:** 01.02.2026
> **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 8-12 –Ω–µ–¥–µ–ª—å

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã](#—ç—Ç–∞–ø-1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
3. [–≠—Ç–∞–ø 2: Backend API](#—ç—Ç–∞–ø-2-backend-api)
4. [–≠—Ç–∞–ø 3: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](#—ç—Ç–∞–ø-3-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
5. [–≠—Ç–∞–ø 4: Frontend –±–∞–∑–æ–≤—ã–π](#—ç—Ç–∞–ø-4-frontend-–±–∞–∑–æ–≤—ã–π)
6. [–≠—Ç–∞–ø 5: –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã](#—ç—Ç–∞–ø-5-–æ—Å–Ω–æ–≤–Ω—ã–µ-—Å—Ç—Ä–∞–Ω–∏—Ü—ã)
7. [–≠—Ç–∞–ø 6: Real-time —Ñ—É–Ω–∫—Ü–∏–∏](#—ç—Ç–∞–ø-6-real-time-—Ñ—É–Ω–∫—Ü–∏–∏)
8. [–≠—Ç–∞–ø 7: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#—ç—Ç–∞–ø-7-–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
9. [–ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏](#—á–µ–∫–ª–∏—Å—Ç-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)

---

## üèó –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –¢–ï–ö–£–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê                       ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   Telegram   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Aiogram Bot ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Services   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    Users     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   Handlers   ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ - api_client ‚îÇ ‚îÇ
‚îÇ                                            ‚îÇ - database   ‚îÇ ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ - violation  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  Remnawave   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   FastAPI    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ - geoip      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    Panel     ‚îÇ     ‚îÇ   Webhook    ‚îÇ     ‚îÇ - sync       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                     ‚îÇ        ‚îÇ
‚îÇ                                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ                                            ‚îÇ   PostgreSQL   ‚îÇ‚îÇ
‚îÇ                                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      –¶–ï–õ–ï–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê                             ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ  ‚îÇ   Telegram   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Aiogram Bot ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ  ‚îÇ    Users     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   Handlers   ‚îÇ      ‚îÇ                       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ                       ‚îÇ
‚îÇ                                             ‚ñº                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ‚îÇ  Remnawave   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   FastAPI    ‚îÇ‚îÄ‚îÄ‚îÇ   Services   ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ    Panel     ‚îÇ     ‚îÇ   Webhook    ‚îÇ  ‚îÇ  (shared)    ‚îÇ            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                              ‚îÇ                 ‚ñ≤                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ  ‚îÇ    React     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ      FastAPI Web API       ‚îÇ                ‚îÇ
‚îÇ  ‚îÇ   Frontend   ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   /api/v2/* endpoints      ‚îÇ                ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ     ‚îÇ   + WebSocket /ws          ‚îÇ                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îÇ        ‚îÇ                          ‚îÇ                                  ‚îÇ
‚îÇ        ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ        ‚îÇ              ‚îÇ      PostgreSQL       ‚îÇ                     ‚îÇ
‚îÇ        ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îÇ        ‚îÇ                                                            ‚îÇ
‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Telegram Login Widget ‚óÄ‚îÄ‚îÄ‚îÄ Auth ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
remnawave-admin/
‚îú‚îÄ‚îÄ src/                          # Telegram –±–æ—Ç (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îú‚îÄ‚îÄ services/                 # ‚Üê SHARED —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ
‚îú‚îÄ‚îÄ web/                          # ‚Üê –ù–û–í–û–ï
‚îÇ   ‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ v2/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py       # Telegram Login + JWT
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nodes.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hosts.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ violations.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ websocket.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ deps.py           # Dependencies (auth, db)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.py       # JWT, password hashing
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ permissions.py    # RBAC
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ node.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ common.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py               # FastAPI app
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ frontend/
‚îÇ       ‚îú‚îÄ‚îÄ src/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/       # Button, Input, Modal, Table
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/       # Sidebar, Header, Footer
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nodes/
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ violations/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Users.tsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserDetail.tsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Nodes.tsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Violations.tsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Analytics.tsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settings.tsx
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Login.tsx
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useWebSocket.ts
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useApi.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts     # Axios/fetch wrapper
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.ts
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nodes.ts
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ store/            # Zustand
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authStore.ts
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uiStore.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ main.tsx
‚îÇ       ‚îú‚îÄ‚îÄ public/
‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îú‚îÄ‚îÄ package.json
‚îÇ       ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ       ‚îú‚îÄ‚îÄ vite.config.ts
‚îÇ       ‚îî‚îÄ‚îÄ tailwind.config.js
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml            # –û–±–Ω–æ–≤–∏—Ç—å
‚îú‚îÄ‚îÄ docker-compose.web.yml        # ‚Üê –ù–û–í–û–ï (–¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏)
‚îî‚îÄ‚îÄ nginx/
    ‚îî‚îÄ‚îÄ nginx.conf                # ‚Üê –ù–û–í–û–ï (reverse proxy)
```

---

## üöÄ –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 3-5 –¥–Ω–µ–π

### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```bash
mkdir -p web/backend/{api/v2,core,schemas}
mkdir -p web/frontend/src/{components,pages,hooks,api,store,types,utils}
mkdir -p web/frontend/src/components/{common,layout,users,nodes,violations}
mkdir -p nginx
```

### 1.2 Backend: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FastAPI

**–§–∞–π–ª:** `web/backend/main.py`

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

from web.backend.api.v2 import auth, users, nodes, hosts, violations, analytics
from web.backend.core.config import settings

app = FastAPI(
    title="Remnawave Admin Web API",
    version="2.0.0",
    docs_url="/api/docs" if settings.debug else None,
    redoc_url="/api/redoc" if settings.debug else None,
)

# CORS
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.cors_origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Routers
app.include_router(auth.router, prefix="/api/v2/auth", tags=["auth"])
app.include_router(users.router, prefix="/api/v2/users", tags=["users"])
app.include_router(nodes.router, prefix="/api/v2/nodes", tags=["nodes"])
app.include_router(hosts.router, prefix="/api/v2/hosts", tags=["hosts"])
app.include_router(violations.router, prefix="/api/v2/violations", tags=["violations"])
app.include_router(analytics.router, prefix="/api/v2/analytics", tags=["analytics"])

@app.get("/api/v2/health")
async def health_check():
    return {"status": "ok", "version": "2.0.0"}
```

### 1.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `web/backend/core/config.py`

```python
from pydantic_settings import BaseSettings
from typing import List

class WebSettings(BaseSettings):
    # App
    debug: bool = False
    secret_key: str

    # JWT
    jwt_algorithm: str = "HS256"
    jwt_expire_minutes: int = 60 * 24  # 24 hours
    jwt_refresh_days: int = 7

    # CORS
    cors_origins: List[str] = ["http://localhost:3000"]

    # Telegram
    telegram_bot_token: str

    # Database (shared with bot)
    database_url: str

    class Config:
        env_prefix = "WEB_"
        env_file = ".env"

settings = WebSettings()
```

### 1.4 Docker Compose –¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏

**–§–∞–π–ª:** `docker-compose.web.yml`

```yaml
version: '3.8'

services:
  web-backend:
    build:
      context: .
      dockerfile: web/backend/Dockerfile
    environment:
      - WEB_SECRET_KEY=${WEB_SECRET_KEY}
      - WEB_TELEGRAM_BOT_TOKEN=${BOT_TOKEN}
      - WEB_DATABASE_URL=${DATABASE_URL}
      - WEB_DEBUG=true
      - WEB_CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]
    ports:
      - "8081:8081"
    depends_on:
      - postgres
    volumes:
      - ./src:/app/src:ro  # Shared services
      - ./web/backend:/app/web/backend

  web-frontend:
    build:
      context: ./web/frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - VITE_API_URL=http://localhost:8081
    volumes:
      - ./web/frontend:/app
      - /app/node_modules

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - web-backend
      - web-frontend
```

### 1.5 Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `nginx/nginx.conf`

```nginx
events {
    worker_connections 1024;
}

http {
    upstream backend {
        server web-backend:8081;
    }

    upstream frontend {
        server web-frontend:3000;
    }

    server {
        listen 80;
        server_name localhost;

        # API requests
        location /api/ {
            proxy_pass http://backend;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        # WebSocket
        location /ws {
            proxy_pass http://backend;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
        }

        # Frontend
        location / {
            proxy_pass http://frontend;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
        }
    }
}
```

### –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 1:

```
[ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
[ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å web/backend/main.py
[ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å web/backend/core/config.py
[ ] –°–æ–∑–¥–∞—Ç—å Dockerfile –¥–ª—è backend
[ ] –°–æ–∑–¥–∞—Ç—å Dockerfile –¥–ª—è frontend
[ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å docker-compose.web.yml
[ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å nginx.conf
[ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env.example
[ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```

---

## üîê –≠—Ç–∞–ø 2: Backend API

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1-2 –Ω–µ–¥–µ–ª–∏

### 2.1 –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (Pydantic)

**–§–∞–π–ª:** `web/backend/schemas/user.py`

```python
from pydantic import BaseModel
from typing import Optional, List
from datetime import datetime
from uuid import UUID

class UserBase(BaseModel):
    username: Optional[str] = None
    email: Optional[str] = None
    telegram_id: Optional[int] = None
    status: str

class UserListItem(UserBase):
    uuid: UUID
    short_uuid: str
    expire_at: Optional[datetime]
    traffic_limit_bytes: Optional[int]
    used_traffic_bytes: int = 0
    hwid_device_limit: int
    created_at: datetime

class UserDetail(UserListItem):
    subscription_uuid: Optional[str]
    online_at: Optional[datetime]
    sub_last_user_agent: Optional[str]
    # Anti-abuse info
    trust_score: Optional[int]
    violation_count_30d: int = 0
    active_connections: int = 0
    unique_ips_24h: int = 0

class UserListResponse(BaseModel):
    items: List[UserListItem]
    total: int
    page: int
    per_page: int
    pages: int

class UserUpdate(BaseModel):
    status: Optional[str] = None
    traffic_limit_bytes: Optional[int] = None
    expire_at: Optional[datetime] = None
    hwid_device_limit: Optional[int] = None
```

### 2.2 API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**–§–∞–π–ª:** `web/backend/api/v2/users.py`

```python
from fastapi import APIRouter, Depends, Query, HTTPException
from typing import Optional
from uuid import UUID

from web.backend.api.deps import get_current_admin, get_db
from web.backend.schemas.user import UserListResponse, UserDetail, UserUpdate
from src.services.api_client import api_client
from src.services.database import DatabaseService

router = APIRouter()

@router.get("/", response_model=UserListResponse)
async def list_users(
    page: int = Query(1, ge=1),
    per_page: int = Query(20, ge=1, le=100),
    search: Optional[str] = None,
    status: Optional[str] = None,
    sort_by: str = "created_at",
    sort_order: str = "desc",
    admin = Depends(get_current_admin),
    db: DatabaseService = Depends(get_db),
):
    """–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π."""
    # –ü–æ–ª—É—á–∞–µ–º –∏–∑ –∫—ç—à–∞ –ë–î –∏–ª–∏ API
    users = await db.get_all_users()

    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
    if search:
        users = [u for u in users if search.lower() in (u.get('username', '') or '').lower()]
    if status:
        users = [u for u in users if u.get('status') == status]

    # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
    reverse = sort_order == "desc"
    users.sort(key=lambda x: x.get(sort_by, ''), reverse=reverse)

    # –ü–∞–≥–∏–Ω–∞—Ü–∏—è
    total = len(users)
    start = (page - 1) * per_page
    end = start + per_page
    items = users[start:end]

    return UserListResponse(
        items=items,
        total=total,
        page=page,
        per_page=per_page,
        pages=(total + per_page - 1) // per_page,
    )

@router.get("/{user_uuid}", response_model=UserDetail)
async def get_user(
    user_uuid: UUID,
    admin = Depends(get_current_admin),
):
    """–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ."""
    user = await api_client.get_user(str(user_uuid))
    if not user:
        raise HTTPException(status_code=404, detail="User not found")

    # –î–æ–±–∞–≤–ª—è–µ–º Anti-Abuse –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    # ...

    return user

@router.patch("/{user_uuid}", response_model=UserDetail)
async def update_user(
    user_uuid: UUID,
    data: UserUpdate,
    admin = Depends(get_current_admin),
):
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    update_data = data.model_dump(exclude_unset=True)
    user = await api_client.update_user(str(user_uuid), **update_data)
    return user

@router.post("/{user_uuid}/disable")
async def disable_user(
    user_uuid: UUID,
    admin = Depends(get_current_admin),
):
    """–û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    await api_client.disable_user(str(user_uuid))
    return {"status": "ok"}

@router.post("/{user_uuid}/enable")
async def enable_user(
    user_uuid: UUID,
    admin = Depends(get_current_admin),
):
    """–í–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    await api_client.enable_user(str(user_uuid))
    return {"status": "ok"}

@router.delete("/{user_uuid}")
async def delete_user(
    user_uuid: UUID,
    admin = Depends(get_current_admin),
):
    """–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    await api_client.delete_user(str(user_uuid))
    return {"status": "ok"}
```

### 2.3 –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```
# Auth
POST   /api/v2/auth/telegram          # Telegram Login Widget callback
POST   /api/v2/auth/refresh           # Refresh JWT token
POST   /api/v2/auth/logout            # Logout (invalidate token)
GET    /api/v2/auth/me                # Current admin info

# Users
GET    /api/v2/users                  # List users (paginated)
POST   /api/v2/users                  # Create user
GET    /api/v2/users/{uuid}           # Get user detail
PATCH  /api/v2/users/{uuid}           # Update user
DELETE /api/v2/users/{uuid}           # Delete user
POST   /api/v2/users/{uuid}/enable    # Enable user
POST   /api/v2/users/{uuid}/disable   # Disable user
POST   /api/v2/users/{uuid}/reset-traffic    # Reset traffic
POST   /api/v2/users/{uuid}/revoke    # Revoke subscription
GET    /api/v2/users/{uuid}/connections      # User connections history
GET    /api/v2/users/{uuid}/violations       # User violations

# Nodes
GET    /api/v2/nodes                  # List nodes
POST   /api/v2/nodes                  # Create node
GET    /api/v2/nodes/{uuid}           # Get node detail
PATCH  /api/v2/nodes/{uuid}           # Update node
DELETE /api/v2/nodes/{uuid}           # Delete node
POST   /api/v2/nodes/{uuid}/restart   # Restart node
GET    /api/v2/nodes/{uuid}/stats     # Node statistics

# Hosts
GET    /api/v2/hosts                  # List hosts
POST   /api/v2/hosts                  # Create host
GET    /api/v2/hosts/{uuid}           # Get host detail
PATCH  /api/v2/hosts/{uuid}           # Update host
DELETE /api/v2/hosts/{uuid}           # Delete host

# Violations
GET    /api/v2/violations             # List violations
GET    /api/v2/violations/{id}        # Get violation detail
POST   /api/v2/violations/{id}/resolve # Resolve violation
GET    /api/v2/violations/pending     # Pending violations

# Analytics
GET    /api/v2/analytics/overview     # Dashboard stats
GET    /api/v2/analytics/users        # User statistics
GET    /api/v2/analytics/traffic      # Traffic statistics
GET    /api/v2/analytics/violations   # Violation statistics
GET    /api/v2/analytics/connections  # Connection statistics
POST   /api/v2/analytics/export       # Export report

# Settings
GET    /api/v2/settings               # Get all settings
PATCH  /api/v2/settings               # Update settings
GET    /api/v2/settings/anti-abuse    # Anti-abuse settings
PATCH  /api/v2/settings/anti-abuse    # Update anti-abuse settings

# WebSocket
WS     /api/v2/ws                     # Real-time updates
```

### –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 2:

```
[ ] –°–æ–∑–¥–∞—Ç—å schemas/ (user.py, node.py, host.py, violation.py, common.py)
[ ] –°–æ–∑–¥–∞—Ç—å api/deps.py (dependencies)
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å api/v2/users.py
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å api/v2/nodes.py
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å api/v2/hosts.py
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å api/v2/violations.py
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å api/v2/analytics.py
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å api/v2/settings.py
[ ] –î–æ–±–∞–≤–∏—Ç—å OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
[ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è API
```

---

## üîë –≠—Ç–∞–ø 3: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 3-5 –¥–Ω–µ–π

### 3.1 Telegram Login Widget

Telegram Login Widget –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –∏—Ö Telegram –∞–∫–∫–∞—É–Ω—Ç.

**–§–∞–π–ª:** `web/backend/core/security.py`

```python
import hmac
import hashlib
import time
from datetime import datetime, timedelta
from typing import Optional
from jose import jwt, JWTError

from web.backend.core.config import settings

def verify_telegram_auth(auth_data: dict) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram Login Widget.
    https://core.telegram.org/widgets/login#checking-authorization
    """
    check_hash = auth_data.pop('hash', None)
    if not check_hash:
        return False

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Å—Ç–∞—Ä–µ–ª–∏ (–Ω–µ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤)
    auth_date = auth_data.get('auth_date')
    if auth_date and int(time.time()) - int(auth_date) > 86400:
        return False

    # –°–æ–∑–¥–∞–µ–º data-check-string
    data_check_arr = [f"{k}={v}" for k, v in sorted(auth_data.items())]
    data_check_string = "\n".join(data_check_arr)

    # –°–æ–∑–¥–∞–µ–º secret key –∏–∑ bot token
    secret_key = hashlib.sha256(settings.telegram_bot_token.encode()).digest()

    # –í—ã—á–∏—Å–ª—è–µ–º hash
    calculated_hash = hmac.new(
        secret_key,
        data_check_string.encode(),
        hashlib.sha256
    ).hexdigest()

    return hmac.compare_digest(calculated_hash, check_hash)

def create_access_token(telegram_id: int, username: str) -> str:
    """–°–æ–∑–¥–∞–µ—Ç JWT access token."""
    expire = datetime.utcnow() + timedelta(minutes=settings.jwt_expire_minutes)
    payload = {
        "sub": str(telegram_id),
        "username": username,
        "exp": expire,
        "type": "access",
    }
    return jwt.encode(payload, settings.secret_key, algorithm=settings.jwt_algorithm)

def create_refresh_token(telegram_id: int) -> str:
    """–°–æ–∑–¥–∞–µ—Ç JWT refresh token."""
    expire = datetime.utcnow() + timedelta(days=settings.jwt_refresh_days)
    payload = {
        "sub": str(telegram_id),
        "exp": expire,
        "type": "refresh",
    }
    return jwt.encode(payload, settings.secret_key, algorithm=settings.jwt_algorithm)

def decode_token(token: str) -> Optional[dict]:
    """–î–µ–∫–æ–¥–∏—Ä—É–µ—Ç JWT token."""
    try:
        payload = jwt.decode(token, settings.secret_key, algorithms=[settings.jwt_algorithm])
        return payload
    except JWTError:
        return None
```

### 3.2 Auth API

**–§–∞–π–ª:** `web/backend/api/v2/auth.py`

```python
from fastapi import APIRouter, HTTPException, Depends, Response
from fastapi.security import HTTPBearer
from pydantic import BaseModel
from typing import Optional

from web.backend.core.security import (
    verify_telegram_auth,
    create_access_token,
    create_refresh_token,
    decode_token,
)
from src.config import get_settings

router = APIRouter()
security = HTTPBearer()

class TelegramAuthData(BaseModel):
    id: int
    first_name: str
    last_name: Optional[str] = None
    username: Optional[str] = None
    photo_url: Optional[str] = None
    auth_date: int
    hash: str

class TokenResponse(BaseModel):
    access_token: str
    refresh_token: str
    token_type: str = "bearer"

class RefreshRequest(BaseModel):
    refresh_token: str

@router.post("/telegram", response_model=TokenResponse)
async def telegram_login(data: TelegramAuthData):
    """
    –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Login Widget.
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–ø–∏—Å—å
    auth_dict = data.model_dump()
    if not verify_telegram_auth(auth_dict.copy()):
        raise HTTPException(status_code=401, detail="Invalid Telegram auth data")

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–ø–∏—Å–∫–µ –∞–¥–º–∏–Ω–æ–≤
    settings = get_settings()
    if data.id not in settings.admins:
        raise HTTPException(status_code=403, detail="Not an admin")

    # –°–æ–∑–¥–∞–µ–º —Ç–æ–∫–µ–Ω—ã
    username = data.username or data.first_name
    access_token = create_access_token(data.id, username)
    refresh_token = create_refresh_token(data.id)

    return TokenResponse(
        access_token=access_token,
        refresh_token=refresh_token,
    )

@router.post("/refresh", response_model=TokenResponse)
async def refresh_tokens(data: RefreshRequest):
    """
    –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token —á–µ—Ä–µ–∑ refresh token.
    """
    payload = decode_token(data.refresh_token)
    if not payload or payload.get("type") != "refresh":
        raise HTTPException(status_code=401, detail="Invalid refresh token")

    telegram_id = int(payload["sub"])

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ –µ—â–µ –∞–¥–º–∏–Ω
    settings = get_settings()
    if telegram_id not in settings.admins:
        raise HTTPException(status_code=403, detail="Not an admin")

    access_token = create_access_token(telegram_id, "admin")
    refresh_token = create_refresh_token(telegram_id)

    return TokenResponse(
        access_token=access_token,
        refresh_token=refresh_token,
    )

@router.get("/me")
async def get_current_user(admin = Depends(get_current_admin)):
    """
    –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–µ.
    """
    return {
        "telegram_id": admin.telegram_id,
        "username": admin.username,
        "role": admin.role,
    }

@router.post("/logout")
async def logout(response: Response):
    """
    –í—ã—Ö–æ–¥ (–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω—ã).
    """
    # –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å blacklist —Ç–æ–∫–µ–Ω–æ–≤
    return {"status": "ok"}
```

### 3.3 Dependencies

**–§–∞–π–ª:** `web/backend/api/deps.py`

```python
from fastapi import Depends, HTTPException, status
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
from typing import Optional
from dataclasses import dataclass

from web.backend.core.security import decode_token
from src.config import get_settings
from src.services.database import db_service

security = HTTPBearer()

@dataclass
class AdminUser:
    telegram_id: int
    username: str
    role: str = "admin"

async def get_current_admin(
    credentials: HTTPAuthorizationCredentials = Depends(security)
) -> AdminUser:
    """
    Dependency –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
    """
    token = credentials.credentials
    payload = decode_token(token)

    if not payload or payload.get("type") != "access":
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="Invalid or expired token",
            headers={"WWW-Authenticate": "Bearer"},
        )

    telegram_id = int(payload["sub"])

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤ —Å–ø–∏—Å–∫–µ –∞–¥–º–∏–Ω–æ–≤
    settings = get_settings()
    if telegram_id not in settings.admins:
        raise HTTPException(
            status_code=status.HTTP_403_FORBIDDEN,
            detail="Not an admin",
        )

    return AdminUser(
        telegram_id=telegram_id,
        username=payload.get("username", "admin"),
    )

async def get_db():
    """
    Dependency –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
    """
    return db_service
```

### 3.4 Frontend: Login Page

**–§–∞–π–ª:** `web/frontend/src/pages/Login.tsx`

```tsx
import { useEffect, useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuthStore } from '../store/authStore';

declare global {
  interface Window {
    TelegramLoginWidget: {
      dataOnauth: (user: TelegramUser) => void;
    };
  }
}

interface TelegramUser {
  id: number;
  first_name: string;
  last_name?: string;
  username?: string;
  photo_url?: string;
  auth_date: number;
  hash: string;
}

export default function Login() {
  const containerRef = useRef<HTMLDivElement>(null);
  const navigate = useNavigate();
  const { login, isAuthenticated } = useAuthStore();

  useEffect(() => {
    if (isAuthenticated) {
      navigate('/');
      return;
    }

    // Telegram Login Widget callback
    window.TelegramLoginWidget = {
      dataOnauth: async (user: TelegramUser) => {
        try {
          await login(user);
          navigate('/');
        } catch (error) {
          console.error('Login failed:', error);
        }
      },
    };

    // –î–æ–±–∞–≤–ª—è–µ–º —Å–∫—Ä–∏–ø—Ç Telegram Login Widget
    const script = document.createElement('script');
    script.src = 'https://telegram.org/js/telegram-widget.js?22';
    script.setAttribute('data-telegram-login', import.meta.env.VITE_TELEGRAM_BOT_USERNAME);
    script.setAttribute('data-size', 'large');
    script.setAttribute('data-onauth', 'TelegramLoginWidget.dataOnauth(user)');
    script.setAttribute('data-request-access', 'write');
    script.async = true;

    containerRef.current?.appendChild(script);

    return () => {
      if (containerRef.current?.contains(script)) {
        containerRef.current.removeChild(script);
      }
    };
  }, [isAuthenticated, navigate, login]);

  return (
    <div className="min-h-screen flex items-center justify-center bg-gray-900">
      <div className="bg-gray-800 p-8 rounded-lg shadow-xl text-center">
        <h1 className="text-2xl font-bold text-white mb-6">
          Remnawave Admin
        </h1>
        <p className="text-gray-400 mb-6">
          –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–Ω–µ–ª–∏
        </p>
        <div ref={containerRef} className="flex justify-center" />
      </div>
    </div>
  );
}
```

### –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 3:

```
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å web/backend/core/security.py
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å web/backend/api/v2/auth.py
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å web/backend/api/deps.py
[ ] –°–æ–∑–¥–∞—Ç—å Login.tsx —Å—Ç—Ä–∞–Ω–∏—Ü—É
[ ] –°–æ–∑–¥–∞—Ç—å authStore.ts (Zustand)
[ ] –î–æ–±–∞–≤–∏—Ç—å protected routes
[ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
[ ] –î–æ–±–∞–≤–∏—Ç—å logout –∏ refresh –ª–æ–≥–∏–∫—É
```

---

## ‚öõÔ∏è –≠—Ç–∞–ø 4: Frontend –±–∞–∑–æ–≤—ã–π

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1 –Ω–µ–¥–µ–ª—è

### 4.1 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd web/frontend
npm create vite@latest . -- --template react-ts
npm install
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install react-router-dom zustand axios react-query @tanstack/react-query
npm install react-icons date-fns
npm install -D @types/react-router-dom
```

### 4.2 Tailwind Config

**–§–∞–π–ª:** `web/frontend/tailwind.config.js`

```js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
        },
        dark: {
          100: '#1e293b',
          200: '#0f172a',
          300: '#020617',
        }
      }
    },
  },
  plugins: [],
}
```

### 4.3 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–§–∞–π–ª:** `web/frontend/src/App.tsx`

```tsx
import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { useAuthStore } from './store/authStore';

import Layout from './components/layout/Layout';
import Login from './pages/Login';
import Dashboard from './pages/Dashboard';
import Users from './pages/Users';
import UserDetail from './pages/UserDetail';
import Nodes from './pages/Nodes';
import Violations from './pages/Violations';
import Analytics from './pages/Analytics';
import Settings from './pages/Settings';

const queryClient = new QueryClient();

function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { isAuthenticated } = useAuthStore();

  if (!isAuthenticated) {
    return <Navigate to="/login" replace />;
  }

  return <>{children}</>;
}

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <BrowserRouter>
        <Routes>
          <Route path="/login" element={<Login />} />
          <Route
            path="/*"
            element={
              <ProtectedRoute>
                <Layout>
                  <Routes>
                    <Route path="/" element={<Dashboard />} />
                    <Route path="/users" element={<Users />} />
                    <Route path="/users/:uuid" element={<UserDetail />} />
                    <Route path="/nodes" element={<Nodes />} />
                    <Route path="/violations" element={<Violations />} />
                    <Route path="/analytics" element={<Analytics />} />
                    <Route path="/settings" element={<Settings />} />
                  </Routes>
                </Layout>
              </ProtectedRoute>
            }
          />
        </Routes>
      </BrowserRouter>
    </QueryClientProvider>
  );
}
```

### 4.4 Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–§–∞–π–ª:** `web/frontend/src/components/layout/Sidebar.tsx`

```tsx
import { Link, useLocation } from 'react-router-dom';
import {
  HiHome, HiUsers, HiServer, HiShieldExclamation,
  HiChartBar, HiCog, HiLogout
} from 'react-icons/hi';
import { useAuthStore } from '../../store/authStore';

const navigation = [
  { name: 'Dashboard', href: '/', icon: HiHome },
  { name: 'Users', href: '/users', icon: HiUsers },
  { name: 'Nodes', href: '/nodes', icon: HiServer },
  { name: 'Violations', href: '/violations', icon: HiShieldExclamation },
  { name: 'Analytics', href: '/analytics', icon: HiChartBar },
  { name: 'Settings', href: '/settings', icon: HiCog },
];

export default function Sidebar() {
  const location = useLocation();
  const { logout, user } = useAuthStore();

  return (
    <div className="flex flex-col w-64 bg-dark-200 border-r border-gray-700">
      {/* Logo */}
      <div className="flex items-center h-16 px-4 border-b border-gray-700">
        <span className="text-xl font-bold text-white">Remnawave</span>
      </div>

      {/* Navigation */}
      <nav className="flex-1 px-2 py-4 space-y-1">
        {navigation.map((item) => {
          const isActive = location.pathname === item.href;
          return (
            <Link
              key={item.name}
              to={item.href}
              className={`flex items-center px-4 py-2 text-sm rounded-lg transition-colors ${
                isActive
                  ? 'bg-primary-600 text-white'
                  : 'text-gray-300 hover:bg-dark-100'
              }`}
            >
              <item.icon className="w-5 h-5 mr-3" />
              {item.name}
            </Link>
          );
        })}
      </nav>

      {/* User info */}
      <div className="p-4 border-t border-gray-700">
        <div className="flex items-center">
          <div className="flex-1">
            <p className="text-sm font-medium text-white">{user?.username}</p>
            <p className="text-xs text-gray-400">Administrator</p>
          </div>
          <button
            onClick={logout}
            className="p-2 text-gray-400 hover:text-white rounded-lg hover:bg-dark-100"
          >
            <HiLogout className="w-5 h-5" />
          </button>
        </div>
      </div>
    </div>
  );
}
```

### 4.5 API Client

**–§–∞–π–ª:** `web/frontend/src/api/client.ts`

```typescript
import axios, { AxiosError, InternalAxiosRequestConfig } from 'axios';
import { useAuthStore } from '../store/authStore';

const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:8081';

const client = axios.create({
  baseURL: `${API_URL}/api/v2`,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Request interceptor - –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω
client.interceptors.request.use(
  (config: InternalAxiosRequestConfig) => {
    const token = useAuthStore.getState().accessToken;
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// Response interceptor - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
client.interceptors.response.use(
  (response) => response,
  async (error: AxiosError) => {
    if (error.response?.status === 401) {
      // –ü–æ–ø—ã—Ç–∫–∞ refresh token
      const refreshToken = useAuthStore.getState().refreshToken;
      if (refreshToken) {
        try {
          const response = await axios.post(`${API_URL}/api/v2/auth/refresh`, {
            refresh_token: refreshToken,
          });

          const { access_token, refresh_token } = response.data;
          useAuthStore.getState().setTokens(access_token, refresh_token);

          // –ü–æ–≤—Ç–æ—Ä—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
          const config = error.config!;
          config.headers.Authorization = `Bearer ${access_token}`;
          return client(config);
        } catch {
          // Refresh failed - logout
          useAuthStore.getState().logout();
        }
      }
    }
    return Promise.reject(error);
  }
);

export default client;
```

### –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 4:

```
[ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Vite –ø—Ä–æ–µ–∫—Ç
[ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Tailwind CSS
[ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Layout (Sidebar, Header)
[ ] –°–æ–∑–¥–∞—Ç—å API client —Å interceptors
[ ] –°–æ–∑–¥–∞—Ç—å authStore (Zustand)
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–æ—É—Ç–∏–Ω–≥ —Å protected routes
[ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Button, Input, Modal, Table)
```

---

## üìÑ –≠—Ç–∞–ø 5: –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 2-3 –Ω–µ–¥–µ–ª–∏

### 5.1 Dashboard

```tsx
// –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å
- –ê–∫—Ç–∏–≤–Ω—ã—Ö –Ω–æ–¥
- –ù–∞—Ä—É—à–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è

// –ì—Ä–∞—Ñ–∏–∫–∏
- Connections –∑–∞ 24 —á–∞—Å–∞
- Traffic –∑–∞ –Ω–µ–¥–µ–ª—é

// Live Activity (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ù–∞—Ä—É—à–µ–Ω–∏—è
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏
```

### 5.2 Users Page

```tsx
// –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–∏—Å–∫ –ø–æ username/email/UUID
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è

// Bulk actions
- –í—ã–±–æ—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

// Quick actions
- Enable/Disable
- Reset traffic
- View details
```

### 5.3 User Detail Page

```tsx
// Profile info
- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- Subscription info
- Traffic usage

// Anti-Abuse section
- Trust Score
- Violation history
- Active connections
- Connection map

// Actions
- Edit user
- Block/Unblock
- Reset traffic
- Delete
```

### 5.4 Nodes Page

```tsx
// –¢–∞–±–ª–∏—Ü–∞ –Ω–æ–¥
- –°—Ç–∞—Ç—É—Å (online/offline)
- Traffic usage
- Connections count

// Node detail
- Configuration
- Statistics
- Agent token
```

### 5.5 Violations Page

```tsx
// –°–ø–∏—Å–æ–∫ –Ω–∞—Ä—É—à–µ–Ω–∏–π
- –§–∏–ª—å—Ç—Ä –ø–æ severity
- –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

// Violation detail
- Score breakdown
- IP addresses
- Actions taken
- Resolve options
```

### –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 5:

```
[ ] Dashboard —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    [ ] Stats cards
    [ ] Charts (recharts –∏–ª–∏ chart.js)
    [ ] Live activity feed

[ ] Users —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    [ ] Table component
    [ ] Search –∏ filters
    [ ] Pagination
    [ ] Bulk actions

[ ] User Detail —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    [ ] Profile section
    [ ] Anti-abuse info
    [ ] Connection history
    [ ] Action buttons

[ ] Nodes —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    [ ] Nodes table
    [ ] Node detail modal
    [ ] Status indicators

[ ] Violations —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    [ ] Violations list
    [ ] Violation detail
    [ ] Resolve actions

[ ] Settings —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    [ ] Config sections
    [ ] Save/Reset buttons
```

---

## ‚ö° –≠—Ç–∞–ø 6: Real-time —Ñ—É–Ω–∫—Ü–∏–∏

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1 –Ω–µ–¥–µ–ª—è

### 6.1 WebSocket Backend

**–§–∞–π–ª:** `web/backend/api/v2/websocket.py`

```python
from fastapi import APIRouter, WebSocket, WebSocketDisconnect, Depends
from typing import Set
import asyncio
import json

from web.backend.api.deps import get_current_admin_ws

router = APIRouter()

class ConnectionManager:
    def __init__(self):
        self.active_connections: Set[WebSocket] = set()

    async def connect(self, websocket: WebSocket):
        await websocket.accept()
        self.active_connections.add(websocket)

    def disconnect(self, websocket: WebSocket):
        self.active_connections.discard(websocket)

    async def broadcast(self, message: dict):
        for connection in self.active_connections.copy():
            try:
                await connection.send_json(message)
            except:
                self.active_connections.discard(connection)

manager = ConnectionManager()

@router.websocket("/ws")
async def websocket_endpoint(
    websocket: WebSocket,
    admin = Depends(get_current_admin_ws),
):
    await manager.connect(websocket)
    try:
        while True:
            # –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (ping/pong)
            data = await websocket.receive_text()
            if data == "ping":
                await websocket.send_text("pong")
    except WebSocketDisconnect:
        manager.disconnect(websocket)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
async def broadcast_event(event_type: str, data: dict):
    await manager.broadcast({
        "type": event_type,
        "data": data,
    })
```

### 6.2 WebSocket Hook (Frontend)

**–§–∞–π–ª:** `web/frontend/src/hooks/useWebSocket.ts`

```typescript
import { useEffect, useRef, useCallback } from 'react';
import { useAuthStore } from '../store/authStore';

type MessageHandler = (data: any) => void;

export function useWebSocket(onMessage: MessageHandler) {
  const wsRef = useRef<WebSocket | null>(null);
  const { accessToken } = useAuthStore();

  const connect = useCallback(() => {
    if (!accessToken) return;

    const wsUrl = `${import.meta.env.VITE_WS_URL || 'ws://localhost:8081'}/api/v2/ws?token=${accessToken}`;
    const ws = new WebSocket(wsUrl);

    ws.onopen = () => {
      console.log('WebSocket connected');
    };

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      onMessage(data);
    };

    ws.onclose = () => {
      console.log('WebSocket disconnected');
      // Reconnect –ø–æ—Å–ª–µ 3 —Å–µ–∫—É–Ω–¥
      setTimeout(connect, 3000);
    };

    wsRef.current = ws;
  }, [accessToken, onMessage]);

  useEffect(() => {
    connect();
    return () => {
      wsRef.current?.close();
    };
  }, [connect]);

  return wsRef.current;
}
```

### 6.3 Live Activity Component

```tsx
import { useState } from 'react';
import { useWebSocket } from '../hooks/useWebSocket';

interface Activity {
  id: string;
  type: 'connection' | 'violation' | 'block';
  message: string;
  timestamp: Date;
}

export default function LiveActivity() {
  const [activities, setActivities] = useState<Activity[]>([]);

  useWebSocket((message) => {
    if (message.type === 'activity') {
      setActivities((prev) => [message.data, ...prev].slice(0, 50));
    }
  });

  return (
    <div className="bg-dark-100 rounded-lg p-4">
      <h3 className="text-lg font-semibold text-white mb-4">
        Live Activity
      </h3>
      <div className="space-y-2 max-h-96 overflow-y-auto">
        {activities.map((activity) => (
          <div
            key={activity.id}
            className="flex items-center text-sm text-gray-300"
          >
            <span className="w-2 h-2 rounded-full mr-2 bg-green-500" />
            <span>{activity.message}</span>
            <span className="ml-auto text-gray-500">
              {activity.timestamp.toLocaleTimeString()}
            </span>
          </div>
        ))}
      </div>
    </div>
  );
}
```

### –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 6:

```
[ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WebSocket endpoint
[ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å–æ–±—ã—Ç–∏—è–º–∏ (violations, connections)
[ ] –°–æ–∑–¥–∞—Ç—å useWebSocket hook
[ ] –î–æ–±–∞–≤–∏—Ç—å Live Activity –Ω–∞ Dashboard
[ ] –î–æ–±–∞–≤–∏—Ç—å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
[ ] Reconnect –ª–æ–≥–∏–∫–∞
[ ] Ping/pong –¥–ª—è keep-alive
```

---

## üöÄ –≠—Ç–∞–ø 7: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 2-3 –Ω–µ–¥–µ–ª–∏

### 7.1 –ö–∞—Ä—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

```tsx
// –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –º–∏—Ä–∞
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ—á–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- –¶–≤–µ—Ç –ø–æ —Å—Ç–∞—Ç—É—Å—É (normal/suspicious/blocked)
- Tooltip —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- Zoom –∏ pan

// –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- react-simple-maps
- –∏–ª–∏ leaflet
```

### 7.2 –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã

```tsx
// Recharts –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- Line chart (traffic, connections)
- Bar chart (violations by severity)
- Pie chart (user distribution)
- Area chart (bandwidth)
```

### 7.3 –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤

```tsx
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞
- –í—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- –§–æ—Ä–º–∞—Ç (CSV, JSON, PDF)
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
```

### 7.4 Dark/Light Theme

```tsx
// Theme switcher
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- CSS variables
- Tailwind dark mode
```

### –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 7:

```
[ ] –ö–∞—Ä—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (react-simple-maps)
[ ] –ì—Ä–∞—Ñ–∏–∫–∏ (recharts)
[ ] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
[ ] Dark/Light theme
[ ] Responsive design (mobile)
[ ] Keyboard shortcuts
[ ] Notifications (toast)
[ ] Error boundaries
[ ] Loading states
[ ] Empty states
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### MVP (Minimum Viable Product)

```
Backend:
[ ] FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
[ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
[ ] API –¥–ª—è users, nodes, hosts
[ ] –ë–∞–∑–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)

Frontend:
[ ] Login —á–µ—Ä–µ–∑ Telegram
[ ] Dashboard —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
[ ] Users list —Å –ø–æ–∏—Å–∫–æ–º
[ ] User detail —Å—Ç—Ä–∞–Ω–∏—Ü–∞
[ ] Nodes list
[ ] –ë–∞–∑–æ–≤—ã–π responsive design

Infrastructure:
[ ] Docker Compose —Ä–∞–±–æ—Ç–∞–µ—Ç
[ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω
[ ] HTTPS (–≤ production)
```

### Production Ready

```
[ ] –í—Å–µ API endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
[ ] WebSocket –¥–ª—è real-time
[ ] –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
[ ] Error handling –≤–µ–∑–¥–µ
[ ] Logging –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
[ ] Rate limiting
[ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
[ ] Security headers
[ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
[ ] CI/CD pipeline
```

---

## üìö –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **FastAPI** ‚Äî web framework
- **Pydantic** ‚Äî validation
- **python-jose** ‚Äî JWT
- **uvicorn** ‚Äî ASGI server
- **asyncpg** ‚Äî PostgreSQL (shared with bot)

### Frontend
- **React 18** ‚Äî UI library
- **TypeScript** ‚Äî type safety
- **Vite** ‚Äî build tool
- **Tailwind CSS** ‚Äî styling
- **React Router** ‚Äî routing
- **Zustand** ‚Äî state management
- **TanStack Query** ‚Äî data fetching
- **Recharts** ‚Äî charts
- **React Icons** ‚Äî icons

### Infrastructure
- **Docker** ‚Äî containerization
- **Nginx** ‚Äî reverse proxy
- **PostgreSQL** ‚Äî database (shared)

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegram Login Widget](https://core.telegram.org/widgets/login)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [React Documentation](https://react.dev/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Zustand](https://zustand-demo.pmnd.rs/)
- [TanStack Query](https://tanstack.com/query)
- [Recharts](https://recharts.org/)

---

*–ü–ª–∞–Ω –≤–µ—Ä—Å–∏–∏ 1.0. –°–æ–∑–¥–∞–Ω: 01.02.2026*
