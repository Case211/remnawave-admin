# ü§ñ Remnawave Admin Bot

<div align="center">

**Telegram-–±–æ—Ç –∏ –≤–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–Ω–µ–ª—å—é Remnawave**

[![Docker](https://img.shields.io/badge/Docker-Ready-blue)](https://www.docker.com/)
[![Python](https://img.shields.io/badge/Python-3.12+-green)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

[English](README_EN.md) | [–†—É—Å—Å–∫–∏–π](README.md)

</div>

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ü§ñ Telegram-–±–æ—Ç
- **üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** ‚Äî –ø–æ–∏—Å–∫, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **üõ∞ –ù–æ–¥—ã** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä, –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **üñ• –•–æ—Å—Ç—ã** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **üß∞ –†–µ—Å—É—Ä—Å—ã** ‚Äî —à–∞–±–ª–æ–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫, —Å–Ω–∏–ø–ø–µ—Ç—ã, API —Ç–æ–∫–µ–Ω—ã, –∫–æ–Ω—Ñ–∏–≥–∏
- **üí∞ –ë–∏–ª–ª–∏–Ω–≥** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –±–∏–ª–ª–∏–Ω–≥-–Ω–æ–¥—ã
- **üìä –°–∏—Å—Ç–µ–º–∞** ‚Äî –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç—Ä–∞—Ñ–∏–∫

### üåê –í–µ–±-–ø–∞–Ω–µ–ª—å
- üìä –î–∞—à–±–æ—Ä–¥ —Å –æ–±–∑–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π
- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –Ω–æ–¥–∞–º–∏, —Ö–æ—Å—Ç–∞–º–∏
- üõ° –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å IP Lookup (–ø—Ä–æ–≤–∞–π–¥–µ—Ä, –≥–æ—Ä–æ–¥, —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ë–î > .env > –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Login Widget + JWT
- üé® –¢—ë–º–Ω–∞—è —Ç–µ–º–∞, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

### üõ° Anti-Abuse —Å–∏—Å—Ç–µ–º–∞
- üîç –ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (–≤—Ä–µ–º–µ–Ω–Ω–æ–π, –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π, ASN, –ø—Ä–æ—Ñ–∏–ª—å, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
- üåç –î–µ—Ç–µ–∫—Ü–∏—è ¬´–Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π¬ª, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ 60+ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –∞–≥–ª–æ–º–µ—Ä–∞—Ü–∏–π
- ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –ø–æ—Ä–æ–≥–∞–º —Å–∫–æ—Ä–∏–Ω–≥–∞
- üì° –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å [Node Agent](node-agent/README.md) –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- ‚öôÔ∏è –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (Telegram –∏ –≤–µ–±-–ø–∞–Ω–µ–ª—å)
- üîî Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –ø–æ —Ç–æ–ø–∏–∫–∞–º
- üåç –†—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏
- üóÑ PostgreSQL —Å graceful degradation (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ –ë–î)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üìã –ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

| –ß—Ç–æ | –ì–¥–µ –≤–∑—è—Ç—å |
|-----|-----------|
| üê≥ **Docker** + **Docker Compose** | [docker.com](https://www.docker.com/) |
| ü§ñ **–¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞** | –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É [@BotFather](https://t.me/BotFather) ‚Üí `/newbot` ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω |
| üîë **API-—Ç–æ–∫–µ–Ω Remnawave** | –ü–∞–Ω–µ–ª—å Remnawave ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω |
| üÜî **–í–∞—à Telegram ID** | –ù–∞–ø–∏—à–∏—Ç–µ [@userinfobot](https://t.me/userinfobot) ‚Üí –æ–Ω –ø—Ä–∏—à–ª—ë—Ç –≤–∞—à —á–∏—Å–ª–æ–≤–æ–π ID |
| üÜî **2 A-–∑–∞–ø–∏—Å–∏** | –ó–∞–ø–∏—Å—å –¥–ª—è Webhook (Bot) + –ó–∞–ø–∏—Å—å –¥–ª—è Web |

---

### –®–∞–≥ 1Ô∏è‚É£ ‚Äî –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/case211/remnawave-admin.git
cd remnawave-admin
```

### –®–∞–≥ 2Ô∏è‚É£ ‚Äî –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`

```bash
cp .env.example .env
nano .env          # –∏–ª–∏ vim, –∏–ª–∏ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ** –ø–æ–ª—è (–±–µ–∑ –Ω–∏—Ö –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è):

```env
# ü§ñ –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–∏–∑ @BotFather)
BOT_TOKEN=1234567890:ABCdefGHIjklmNOPqrstUVWxyz

# üåê –ê–¥—Ä–µ—Å API Remnawave
# –ï—Å–ª–∏ –±–æ—Ç –∏ –ø–∞–Ω–µ–ª—å –≤ –æ–¥–Ω–æ–π Docker-—Å–µ—Ç–∏:
API_BASE_URL=http://remnawave:3000
# –ï—Å–ª–∏ –ø–∞–Ω–µ–ª—å –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ:
# API_BASE_URL=https://panel.yourdomain.com

# üîë API-—Ç–æ–∫–µ–Ω –∏–∑ –ø–∞–Ω–µ–ª–∏ Remnawave
API_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∏–∑_–ø–∞–Ω–µ–ª–∏

# üë§ Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
ADMINS=123456789
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ **–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** (PostgreSQL –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Docker):

```env
# üóÑ PostgreSQL ‚Äî –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å
POSTGRES_USER=remnawave
POSTGRES_PASSWORD=–ø—Ä–∏–¥—É–º–∞–π—Ç–µ_–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å
POSTGRES_DB=remnawave_bot

# ‚ö†Ô∏è –ü–∞—Ä–æ–ª—å —Ç—É—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å POSTGRES_PASSWORD –≤—ã—à–µ!
DATABASE_URL=postgresql://remnawave:–ø—Ä–∏–¥—É–º–∞–π—Ç–µ_–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å@remnawave-admin-db:5432/remnawave_bot
```

### –®–∞–≥ 3Ô∏è‚É£ ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ Docker-—Å–µ—Ç—å (–æ–¥–∏–Ω —Ä–∞–∑)
docker network create remnawave-network

# –°–∫–∞—á–∞–π—Ç–µ –æ–±—Ä–∞–∑—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
docker compose logs -f bot
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`.

---

### –®–∞–≥ 4Ô∏è‚É£ ‚Äî –í–µ–±-–ø–∞–Ω–µ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
# üåê –í–µ–±-–ø–∞–Ω–µ–ª—å
# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT-—Å–µ—Å—Å–∏–π (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: openssl rand -hex 32)
WEB_SECRET_KEY=—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞

# Username –±–æ—Ç–∞ (–±–µ–∑ @) ‚Äî –Ω—É–∂–µ–Ω –¥–ª—è Telegram Login Widget
TELEGRAM_BOT_USERNAME=your_bot_username

# –î–æ–º–µ–Ω –≤–µ–±-–ø–∞–Ω–µ–ª–∏ (–¥–ª—è CORS)
WEB_CORS_ORIGINS=https://admin.yourdomain.com
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º `web`:

```bash
docker compose --profile web up -d
```

–í–µ–±-–ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö: **frontend :3000**, **backend :8081**.

> üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–æ–º–µ–Ω–∞ –∏ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏: [web/README.md](web/README.md)

---

### –®–∞–≥ 5Ô∏è‚É£ ‚Äî Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ß—Ç–æ–±—ã –±–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –ø–∞–Ω–µ–ª–∏ ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
# üîî –ß–∞—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
NOTIFICATIONS_CHAT_ID=-1001234567890    # ID –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞

# üîê –°–µ–∫—Ä–µ—Ç –¥–ª—è webhook (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: openssl rand -hex 64)
WEBHOOK_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
```

–ó–∞—Ç–µ–º –≤ **–ø–∞–Ω–µ–ª–∏ Remnawave** —É–∫–∞–∂–∏—Ç–µ:
- **WEBHOOK_URL** = `http://bot:8080/webhook` (–µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–π Docker-—Å–µ—Ç–∏)
- **WEBHOOK_SECRET_HEADER** = —Ç–æ—Ç –∂–µ –∫–ª—é—á, —á—Ç–æ –∏ `WEBHOOK_SECRET` –≤ `.env` –±–æ—Ç–∞

> üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ nginx/Caddy: [WEBHOOK_SETUP.md](WEBHOOK_SETUP.md)

---

### –®–∞–≥ 6Ô∏è‚É£ ‚Äî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ç–æ–ø–∏–∫–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —É –≤–∞—Å –≥—Ä—É–ø–ø–∞-—Ñ–æ—Ä—É–º –≤ Telegram, –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ç–æ–ø–∏–∫–∞–º:

```env
NOTIFICATIONS_TOPIC_USERS=456       # üë• –°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
NOTIFICATIONS_TOPIC_NODES=789       # üõ∞ –°–æ–±—ã—Ç–∏—è –Ω–æ–¥
NOTIFICATIONS_TOPIC_SERVICE=101     # ‚öôÔ∏è –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
NOTIFICATIONS_TOPIC_HWID=102        # üíª HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
NOTIFICATIONS_TOPIC_CRM=103         # üí∞ –ë–∏–ª–ª–∏–Ω–≥
NOTIFICATIONS_TOPIC_ERRORS=104      # ‚ùå –û—à–∏–±–∫–∏
NOTIFICATIONS_TOPIC_VIOLATIONS=105  # üõ° –ù–∞—Ä—É—à–µ–Ω–∏—è
```

> üí° –ï—Å–ª–∏ —Ç–æ–ø–∏–∫ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–π–¥—ë—Ç –≤ `NOTIFICATIONS_TOPIC_ID` (–æ–±—â–∏–π fallback).

---

## üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env: API_BASE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω-–ø–∞–Ω–µ–ª–∏.com
python -m src.main
```

---

## ‚öôÔ∏è –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑. | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------|-----------|----------|
| `BOT_TOKEN` | ‚úÖ | ‚Äî | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ |
| `API_BASE_URL` | ‚úÖ | ‚Äî | URL API Remnawave |
| `API_TOKEN` | ‚úÖ | ‚Äî | –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ API |
| `ADMINS` | ‚úÖ | ‚Äî | ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `DEFAULT_LOCALE` | ‚Äî | `ru` | –Ø–∑—ã–∫ (`ru` / `en`) |
| `LOG_LEVEL` | ‚Äî | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |

### üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑. | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------|-----------|----------|
| `POSTGRES_USER` | ‚úÖ | ‚Äî | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å PostgreSQL |
| `POSTGRES_PASSWORD` | ‚úÖ | ‚Äî | –ü–∞—Ä–æ–ª—å PostgreSQL |
| `POSTGRES_DB` | ‚úÖ | ‚Äî | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `DATABASE_URL` | ‚úÖ | ‚Äî | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL |
| `SYNC_INTERVAL_SECONDS` | ‚Äî | `300` | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å API (—Å–µ–∫) |

### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `NOTIFICATIONS_CHAT_ID` | ID –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞ |
| `NOTIFICATIONS_TOPIC_ID` | –û–±—â–∏–π —Ç–æ–ø–∏–∫ (fallback) |
| `NOTIFICATIONS_TOPIC_USERS` | –¢–æ–ø–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `NOTIFICATIONS_TOPIC_NODES` | –¢–æ–ø–∏–∫ –¥–ª—è –Ω–æ–¥ |
| `NOTIFICATIONS_TOPIC_SERVICE` | –°–µ—Ä–≤–∏—Å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `NOTIFICATIONS_TOPIC_HWID` | HWID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `NOTIFICATIONS_TOPIC_CRM` | –ë–∏–ª–ª–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `NOTIFICATIONS_TOPIC_ERRORS` | –û—à–∏–±–∫–∏ |
| `NOTIFICATIONS_TOPIC_VIOLATIONS` | –ù–∞—Ä—É—à–µ–Ω–∏—è |

### üîó Webhook

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----------|----------|
| `WEBHOOK_SECRET` | ‚Äî | –ö–ª—é—á –ø—Ä–æ–≤–µ—Ä–∫–∏ webhook (HMAC-SHA256) |
| `WEBHOOK_PORT` | `8080` | –ü–æ—Ä—Ç webhook —Å–µ—Ä–≤–µ—Ä–∞ |

### üåê –í–µ–±-–ø–∞–Ω–µ–ª—å

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑.* | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|-----------|----------|
| `WEB_SECRET_KEY` | ‚úÖ | ‚Äî | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á JWT |
| `TELEGRAM_BOT_USERNAME` | ‚úÖ | ‚Äî | Username –±–æ—Ç–∞ (–±–µ–∑ @) |
| `WEB_CORS_ORIGINS` | ‚Äî | ‚Äî | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã (CORS) |
| `WEB_JWT_EXPIRE_MINUTES` | ‚Äî | `30` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ access token (–º–∏–Ω) |
| `WEB_JWT_REFRESH_HOURS` | ‚Äî | `6` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ refresh token (—á) |
| `WEB_BACKEND_PORT` | ‚Äî | `8081` | –ü–æ—Ä—Ç –±—ç–∫–µ–Ω–¥–∞ |
| `WEB_FRONTEND_PORT` | ‚Äî | `3000` | –ü–æ—Ä—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ |
| `WEB_ALLOWED_IPS` | ‚Äî | ‚Äî | –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ IP (CIDR) |

*\* –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å `--profile web`*

---

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ |
| `/health` | –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã |
| `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–Ω–µ–ª–∏ |
| `/bandwidth` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ |
| `/config` | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| `/user <username\|id>` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ |
| `/node <uuid>` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–¥–µ |
| `/host <uuid>` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–æ—Å—Ç–µ |

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞: **—Ñ–∞–π–ª—ã** (–ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è) –∏ **–∫–æ–Ω—Å–æ–ª—å** (—Ç–æ–ª—å–∫–æ WARNING+).

| –§–∞–π–ª | –£—Ä–æ–≤–µ–Ω—å | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|------|---------|------------|
| `adminbot_INFO.log` | INFO+ | –í—Å—ë: API-–≤—ã–∑–æ–≤—ã, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –¥–µ–π—Å—Ç–≤–∏—è |
| `adminbot_WARNING.log` | WARNING+ | –ü—Ä–æ–±–ª–µ–º—ã: —Ç–∞–π–º–∞—É—Ç—ã, –æ—à–∏–±–∫–∏ |
| `web_INFO.log` | INFO+ | –õ–æ–≥–∏ –≤–µ–±-–±—ç–∫–µ–Ω–¥–∞ |
| `web_WARNING.log` | WARNING+ | –ü—Ä–æ–±–ª–µ–º—ã –≤–µ–±-–±—ç–∫–µ–Ω–¥–∞ |

–†–æ—Ç–∞—Ü–∏—è: 50 MB –Ω–∞ —Ñ–∞–π–ª, 5 –±—ç–∫–∞–ø–æ–≤ (gzip). –§–∞–π–ª—ã –≤ `./logs/`.

```bash
docker compose logs -f bot                    # Live-–ª–æ–≥–∏
tail -100 ./logs/adminbot_INFO.log            # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
remnawave-admin/
‚îú‚îÄ‚îÄ src/                        # Telegram-–±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ handlers/               # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (users, nodes, hosts, billing, ...)
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/              # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/               # API client, database, violation detector, webhook, ...
‚îÇ   ‚îî‚îÄ‚îÄ utils/                  # i18n, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ web/                        # –í–µ–±-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ frontend/               # React + TypeScript + Tailwind
‚îÇ   ‚îî‚îÄ‚îÄ backend/                # FastAPI –±—ç–∫–µ–Ω–¥
‚îú‚îÄ‚îÄ node-agent/                 # –ê–≥–µ–Ω—Ç —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –Ω–æ–¥
‚îú‚îÄ‚îÄ alembic/                    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ locales/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (ru, en)
‚îî‚îÄ‚îÄ docker-compose.yml          # Docker Compose (–ø—Ä–æ—Ñ–∏–ª–∏: bot, web)
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| [CHANGELOG.md](CHANGELOG.md) | –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π |
| [WEBHOOK_SETUP.md](WEBHOOK_SETUP.md) | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook |
| [docs/anti-abuse.md](docs/anti-abuse.md) | Anti-Abuse —Å–∏—Å—Ç–µ–º–∞, –±–∞–∑–∞ ASN, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |
| [web/README.md](web/README.md) | –í–µ–±-–ø–∞–Ω–µ–ª—å: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏, API |
| [web/SECURITY_AUDIT.md](web/SECURITY_AUDIT.md) | –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ |
| [node-agent/README.md](node-agent/README.md) | Node Agent: —É—Å—Ç–∞–Ω–æ–≤–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, troubleshooting |

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
docker compose ps                    # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose logs -f bot           # –õ–æ–≥–∏
docker compose config                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å API

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `API_BASE_URL` –∏ `API_TOKEN`
- Docker-—Å–µ—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `docker network ls | grep remnawave-network`

### –û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ

- Telegram ID –≤ `ADMINS`? –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot)

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- `WEBHOOK_SECRET` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `WEBHOOK_SECRET_HEADER` –≤ –ø–∞–Ω–µ–ª–∏?
- URL webhook –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –ø–∞–Ω–µ–ª–∏?
- –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [WEBHOOK_SETUP.md](WEBHOOK_SETUP.md)

### –ü–æ—Ç–µ—Ä—è–Ω –¥–æ—Å—Ç—É–ø –∫ –≤–µ–±-–ø–∞–Ω–µ–ª–∏

–ï—Å–ª–∏ –≤—ã –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å, –∞ Telegram-–≤—Ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CLI-—É—Ç–∏–ª–∏—Ç—É `scripts/admin_cli.py`.

**–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å** (–±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π):

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py reset-password
```

–î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª—è:

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py reset-password --username myadmin
docker exec -it <container_name> python3 scripts/admin_cli.py reset-password --password 'MyNew$ecure1'
```

**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞:**

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py create-superadmin --username newadmin
```

**–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py list-admins
```

> –£—Ç–∏–ª–∏—Ç–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ PostgreSQL (—á–∏—Ç–∞–µ—Ç `DATABASE_URL` –∏–∑ `.env`), –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–π –≤–µ–±-–ø–∞–Ω–µ–ª–∏.

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É: `git checkout -b feature/amazing-feature`
3. Commit –∏ push
4. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. [LICENSE](LICENSE).

---

## üíñ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- [Issues –Ω–∞ GitHub](https://github.com/case211/remnawave-admin/issues)
- [Telegram-—á–∞—Ç](https://t.me/remnawave_admin)

–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞:
- TON: `UQDDe-jyFTbQsPHqyojdFeO1_m7uPF-q1w0g_MfbSOd3l1sC`
- USDT TRC20: `TGyHJj2PsYSUwkBbWdc7BFfsAxsE6SGGJP`
- BTC: `bc1qusrj5rxd3kv6eepzpdn0muy6zsl3c24xunz2xn`

---

<div align="center">

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Remnawave

</div>
