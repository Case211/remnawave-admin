# ü§ñ Remnawave Admin Web + Bot

<div align="center">

<img src="remnawave-admin.webp" alt="Remnawave Admin" width="100%" />

**Telegram-–±–æ—Ç –∏ –≤–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–Ω–µ–ª—å—é Remnawave**

[![Docker](https://img.shields.io/badge/Docker-Ready-blue)](https://www.docker.com/)
[![Python](https://img.shields.io/badge/Python-3.12+-green)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

[English](README_EN.md) | [–†—É—Å—Å–∫–∏–π](README.md)

</div>

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ü§ñ Telegram-–±–æ—Ç
- **üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** ‚Äî –ø–æ–∏—Å–∫, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **üõ∞ –ù–æ–¥—ã** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä, –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **üñ• –•–æ—Å—Ç—ã** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **üß∞ –†–µ—Å—É—Ä—Å—ã** ‚Äî —à–∞–±–ª–æ–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫, —Å–Ω–∏–ø–ø–µ—Ç—ã, API —Ç–æ–∫–µ–Ω—ã, –∫–æ–Ω—Ñ–∏–≥–∏
- **üí∞ –ë–∏–ª–ª–∏–Ω–≥** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –±–∏–ª–ª–∏–Ω–≥-–Ω–æ–¥—ã
- **üìä –°–∏—Å—Ç–µ–º–∞** ‚Äî –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç—Ä–∞—Ñ–∏–∫

### üåê –í–µ–±-–ø–∞–Ω–µ–ª—å
- üìä –î–∞—à–±–æ—Ä–¥ —Å –æ–±–∑–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π
- üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –Ω–æ–¥–∞–º–∏, —Ö–æ—Å—Ç–∞–º–∏
- üõ° –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å IP Lookup (–ø—Ä–æ–≤–∞–π–¥–µ—Ä, –≥–æ—Ä–æ–¥, —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- üó∫ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≥–µ–æ-–∫–∞—Ä—Ç–∞ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –≥–æ—Ä–æ–¥–∞–º
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ë–î > .env > –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Login Widget + JWT
- üé® 6 —Ç—ë–º–Ω—ã—Ö —Ç–µ–º + 1 —Å–≤–µ—Ç–ª–∞—è, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- üåç –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (—Ä—É—Å—Å–∫–∏–π / –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- üîî –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∞–ª–µ—Ä—Ç–æ–≤ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏

### üõ° Anti-Abuse —Å–∏—Å—Ç–µ–º–∞
- üîç –ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (–≤—Ä–µ–º–µ–Ω–Ω–æ–π, –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π, ASN, –ø—Ä–æ—Ñ–∏–ª—å, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
- üåç –î–µ—Ç–µ–∫—Ü–∏—è ¬´–Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π¬ª, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ 60+ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –∞–≥–ª–æ–º–µ—Ä–∞—Ü–∏–π
- ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –ø–æ—Ä–æ–≥–∞–º —Å–∫–æ—Ä–∏–Ω–≥–∞
- üì° –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å [Node Agent](node-agent/README.md) –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### üìß –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
- üì§ –ü—Ä—è–º–∞—è MX-–¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö SMTP-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- üîè DKIM-–ø–æ–¥–ø–∏—Å—å (RSA-2048) + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ SPF/DKIM/DMARC
- üì• –ü—Ä–∏—ë–º –≤—Ö–æ–¥—è—â–∏—Ö –ø–∏—Å–µ–º (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SMTP-—Å–µ—Ä–≤–µ—Ä)
- üìä –û—á–µ—Ä–µ–¥—å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å –ø–æ–≤—Ç–æ—Ä–∞–º–∏, rate limiting –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- ‚úçÔ∏è –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π compose-—Ä–µ–¥–∞–∫—Ç–æ—Ä + inbox-–ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫

### üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- üèó –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ARM64 (aarch64) ‚Äî Docker-–æ–±—Ä–∞–∑—ã –¥–ª—è `linux/amd64` –∏ `linux/arm64`
- ‚öôÔ∏è –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (Telegram –∏ –≤–µ–±-–ø–∞–Ω–µ–ª—å)
- üîî Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –ø–æ —Ç–æ–ø–∏–∫–∞–º
- üìù –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: —Å–º–µ–Ω–∞ —É—Ä–æ–≤–Ω—è, —Ä–æ—Ç–∞—Ü–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
- üåç –†—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏
- üóÑ PostgreSQL —Å graceful degradation (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ –ë–î)
- üß™ –¢–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: Playwright E2E, CI/CD workflows

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üìã –ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

| –ß—Ç–æ | –ì–¥–µ –≤–∑—è—Ç—å |
|-----|-----------|
| üê≥ **Docker** + **Docker Compose** | [docker.com](https://www.docker.com/) |
| ü§ñ **–¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞** | –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É [@BotFather](https://t.me/BotFather) ‚Üí `/newbot` ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω |
| üîë **API-—Ç–æ–∫–µ–Ω Remnawave** | –ü–∞–Ω–µ–ª—å Remnawave ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω |
| üÜî **–í–∞—à Telegram ID** | –ù–∞–ø–∏—à–∏—Ç–µ [@userinfobot](https://t.me/userinfobot) ‚Üí –æ–Ω –ø—Ä–∏—à–ª—ë—Ç –≤–∞—à —á–∏—Å–ª–æ–≤–æ–π ID |
| üÜî **2 A-–∑–∞–ø–∏—Å–∏** | –ó–∞–ø–∏—Å—å –¥–ª—è Webhook (Bot) + –ó–∞–ø–∏—Å—å –¥–ª—è Web |

---

### –®–∞–≥ 1Ô∏è‚É£ ‚Äî –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/case211/remnawave-admin.git
cd remnawave-admin
```

### –®–∞–≥ 2Ô∏è‚É£ ‚Äî –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`

```bash
cp .env.example .env
nano .env          # –∏–ª–∏ vim, –∏–ª–∏ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ** –ø–æ–ª—è (–±–µ–∑ –Ω–∏—Ö –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è):

```env
# ü§ñ –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–∏–∑ @BotFather)
BOT_TOKEN=1234567890:ABCdefGHIjklmNOPqrstUVWxyz

# üåê –ê–¥—Ä–µ—Å API Remnawave
# –ï—Å–ª–∏ –±–æ—Ç –∏ –ø–∞–Ω–µ–ª—å –≤ –æ–¥–Ω–æ–π Docker-—Å–µ—Ç–∏:
API_BASE_URL=http://remnawave:3000
# –ï—Å–ª–∏ –ø–∞–Ω–µ–ª—å –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ:
# API_BASE_URL=https://panel.yourdomain.com

# üîë API-—Ç–æ–∫–µ–Ω –∏–∑ –ø–∞–Ω–µ–ª–∏ Remnawave
API_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∏–∑_–ø–∞–Ω–µ–ª–∏

# üë§ Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
ADMINS=123456789
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ **–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** (PostgreSQL –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Docker):

```env
# üóÑ PostgreSQL ‚Äî –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å
POSTGRES_USER=remnawave
POSTGRES_PASSWORD=–ø—Ä–∏–¥—É–º–∞–π—Ç–µ_–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å
POSTGRES_DB=remnawave_bot

# ‚ö†Ô∏è –ü–∞—Ä–æ–ª—å —Ç—É—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å POSTGRES_PASSWORD –≤—ã—à–µ!
DATABASE_URL=postgresql://remnawave:–ø—Ä–∏–¥—É–º–∞–π—Ç–µ_–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å@remnawave-admin-db:5432/remnawave_bot
```

### –®–∞–≥ 3Ô∏è‚É£ ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ Docker-—Å–µ—Ç—å (–æ–¥–∏–Ω —Ä–∞–∑)
docker network create remnawave-network

# –°–∫–∞—á–∞–π—Ç–µ –æ–±—Ä–∞–∑—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
docker compose logs -f bot
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`.

---

### –®–∞–≥ 4Ô∏è‚É£ ‚Äî –í–µ–±-–ø–∞–Ω–µ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
# üåê –í–µ–±-–ø–∞–Ω–µ–ª—å
# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT-—Å–µ—Å—Å–∏–π (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: openssl rand -hex 32)
WEB_SECRET_KEY=—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞

# Username –±–æ—Ç–∞ (–±–µ–∑ @) ‚Äî –Ω—É–∂–µ–Ω –¥–ª—è Telegram Login Widget
TELEGRAM_BOT_USERNAME=your_bot_username

# –î–æ–º–µ–Ω –≤–µ–±-–ø–∞–Ω–µ–ª–∏ (–¥–ª—è CORS)
WEB_CORS_ORIGINS=https://admin.yourdomain.com
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º `web`:

```bash
docker compose --profile web up -d
```

–í–µ–±-–ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö: **frontend :3000**, **backend :8081**.

> üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–æ–º–µ–Ω–∞ –∏ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏: [web/README.md](web/README.md)

---

### –®–∞–≥ 5Ô∏è‚É£ ‚Äî Webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ß—Ç–æ–±—ã –±–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –ø–∞–Ω–µ–ª–∏ ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
# üîî –ß–∞—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
NOTIFICATIONS_CHAT_ID=-1001234567890    # ID –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞

# üîê –°–µ–∫—Ä–µ—Ç –¥–ª—è webhook (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ: openssl rand -hex 64)
WEBHOOK_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
```

–ó–∞—Ç–µ–º –≤ **–ø–∞–Ω–µ–ª–∏ Remnawave** —É–∫–∞–∂–∏—Ç–µ:
- **WEBHOOK_URL** = `http://bot:8080/webhook` (–µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–π Docker-—Å–µ—Ç–∏)
- **WEBHOOK_SECRET_HEADER** = —Ç–æ—Ç –∂–µ –∫–ª—é—á, —á—Ç–æ –∏ `WEBHOOK_SECRET` –≤ `.env` –±–æ—Ç–∞

> üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ nginx/Caddy: [WEBHOOK_SETUP.md](WEBHOOK_SETUP.md)

---

### –®–∞–≥ 6Ô∏è‚É£ ‚Äî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ç–æ–ø–∏–∫–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —É –≤–∞—Å –≥—Ä—É–ø–ø–∞-—Ñ–æ—Ä—É–º –≤ Telegram, –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ç–æ–ø–∏–∫–∞–º:

```env
NOTIFICATIONS_TOPIC_USERS=456       # üë• –°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
NOTIFICATIONS_TOPIC_NODES=789       # üõ∞ –°–æ–±—ã—Ç–∏—è –Ω–æ–¥
NOTIFICATIONS_TOPIC_SERVICE=101     # ‚öôÔ∏è –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
NOTIFICATIONS_TOPIC_HWID=102        # üíª HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
NOTIFICATIONS_TOPIC_CRM=103         # üí∞ –ë–∏–ª–ª–∏–Ω–≥
NOTIFICATIONS_TOPIC_ERRORS=104      # ‚ùå –û—à–∏–±–∫–∏
NOTIFICATIONS_TOPIC_VIOLATIONS=105  # üõ° –ù–∞—Ä—É—à–µ–Ω–∏—è
```

> üí° –ï—Å–ª–∏ —Ç–æ–ø–∏–∫ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–π–¥—ë—Ç –≤ `NOTIFICATIONS_TOPIC_ID` (–æ–±—â–∏–π fallback).

---

### –®–∞–≥ 7Ô∏è‚É£ ‚Äî –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í–µ–±-–ø–∞–Ω–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä —Å DKIM-–ø–æ–¥–ø–∏—Å—å—é, –ø—Ä—è–º–æ–π MX-–¥–æ—Å—Ç–∞–≤–∫–æ–π –∏ –ø—Ä–∏—ë–º–æ–º –≤—Ö–æ–¥—è—â–∏—Ö –ø–∏—Å–µ–º ‚Äî –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö SMTP-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.

#### –í–∫–ª—é—á–µ–Ω–∏–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** –≤ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ ‚Üí —Å–µ–∫—Ü–∏—è **"–ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä"** ‚Üí –≤–∫–ª—é—á–∏—Ç–µ **"–ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –≤–∫–ª—é—á—ë–Ω"**. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–ò–ª–∏ —á–µ—Ä–µ–∑ `.env`:

```env
MAIL_SERVER_ENABLED=true
MAIL_INBOUND_PORT=2525          # –ü–æ—Ä—Ç –ø—Ä–∏—ë–º–∞ –≤—Ö–æ–¥—è—â–∏—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2525)
MAIL_SERVER_HOSTNAME=0.0.0.0    # IP –¥–ª—è SMTP-—Å–µ—Ä–≤–µ—Ä–∞
```

> üí° –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –∏–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (Settings), `.env` ‚Äî –∫–∞–∫ fallback.

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Mail Server** ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Domains** ‚Üí **Add Domain**
2. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä `example.com`)
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç DKIM-–∫–ª—é—á–∏ (RSA-2048)

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

–ù–∞–∂–º–∏—Ç–µ **"DNS Records"** —É –¥–æ–º–µ–Ω–∞ ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç 4 –∑–∞–ø–∏—Å–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É DNS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:

| –¢–∏–ø | –•–æ—Å—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----|------|-----------|
| **MX** | `example.com` | –ù–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ö–æ–¥—è—â—É—é –ø–æ—á—Ç—É –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä |
| **TXT** | `example.com` | SPF ‚Äî —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤–∞—à–µ–º—É IP –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—á—Ç—É |
| **TXT** | `rw._domainkey.example.com` | DKIM ‚Äî –ø–æ–¥–ø–∏—Å—å –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| **TXT** | `_dmarc.example.com` | DMARC ‚Äî –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è –Ω–µ–≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∏—Å–µ–º |

–ó–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ **"Check DNS"** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

#### –°–µ—Ç–µ–≤—ã–µ –ø–æ—Ä—Ç—ã

```
–ü–æ—Ä—Ç 25  ‚Äî –∏—Å—Ö–æ–¥—è—â–∏–π (–¥–ª—è –ø—Ä—è–º–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞ MX-—Å–µ—Ä–≤–µ—Ä—ã –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π)
–ü–æ—Ä—Ç 2525 ‚Äî –≤—Ö–æ–¥—è—â–∏–π (–ø—Ä–∏—ë–º –ø–∏—Å–µ–º, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
```

–í `docker-compose.yml` –¥–æ–±–∞–≤—å—Ç–µ:

```yaml
ports:
  - "25:2525"    # –≤—Ö–æ–¥—è—â–∞—è –ø–æ—á—Ç–∞
```

> ‚ö†Ô∏è –ú–Ω–æ–≥–∏–µ –æ–±–ª–∞—á–Ω—ã–µ —Ö–æ—Å—Ç–∏–Ω–≥–∏ (AWS, GCP, Azure) –±–ª–æ–∫–∏—Ä—É—é—Ç –ø–æ—Ä—Ç 25. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPS —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –ø–æ—Ä—Ç–æ–º 25 (Hetzner, OVH, DigitalOcean).

#### –ó–∞ reverse proxy (nginx, Caddy, Traefik)

–í–µ–±-–ø–∞–Ω–µ–ª—å (HTTP API) –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ reverse proxy –∫–∞–∫ –æ–±—ã—á–Ω–æ ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/api/v2/mailserver/*` —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

**SMTP ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª**, –æ–Ω **–Ω–µ –º–æ–∂–µ—Ç** –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ HTTP reverse proxy. –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

**–í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî –ü—Ä—è–º–æ–π –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

```yaml
# docker-compose.yml ‚Äî SMTP-–ø–æ—Ä—Ç –º–∏–Ω—É–µ—Ç proxy
services:
  remnawave-admin:
    ports:
      - "25:2525"    # –≤—Ö–æ–¥—è—â–∞—è –ø–æ—á—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é
```

**–í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî nginx stream proxy (TCP):**

```nginx
# –û—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫ stream {}, –ù–ï –≤–Ω—É—Ç—Ä–∏ http {}
stream {
    server {
        listen 25;
        proxy_pass remnawave-admin:2525;
    }
}
```

**–í–∞—Ä–∏–∞–Ω—Ç 3 ‚Äî Caddy L4 (TCP proxy):**

–î–ª—è TCP-–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è Caddy –Ω—É–∂–µ–Ω –ø–ª–∞–≥–∏–Ω [caddy-l4](https://github.com/mholt/caddy-l4):

```json
{
  "apps": {
    "layer4": {
      "servers": {
        "smtp": {
          "listen": [":25"],
          "routes": [{
            "handle": [{
              "handler": "proxy",
              "upstreams": [{"dial": ["remnawave-admin:2525"]}]
            }]
          }]
        }
      }
    }
  }
}
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Caddyfile (—Å `caddy-l4`):

```caddyfile
:25 {
    route {
        proxy remnawave-admin:2525
    }
}
```

**–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

```
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç
  ‚îÇ
  ‚îú‚îÄ‚îÄ :443 (HTTPS) ‚Üí nginx/Caddy ‚Üí :8081 (–≤–µ–±-–ø–∞–Ω–µ–ª—å API)
  ‚îÇ                              ‚Üí :3000 (–≤–µ–±-–ø–∞–Ω–µ–ª—å frontend)
  ‚îÇ
  ‚îî‚îÄ‚îÄ :25  (SMTP)  ‚Üí –Ω–∞–ø—Ä—è–º—É—é   ‚Üí :2525 (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SMTP-—Å–µ—Ä–≤–µ—Ä)
```

**–í–∞–∂–Ω–æ:**
- MX, SPF, PTR –∑–∞–ø–∏—Å–∏ –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ **–ø—É–±–ª–∏—á–Ω—ã–π IP** –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- PTR-–∑–∞–ø–∏—Å—å (reverse DNS) –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —É —Ö–æ—Å—Ç–µ—Ä–∞ ‚Äî —É–ª—É—á—à–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å
- –ï—Å–ª–∏ proxy –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–±—Ä–æ—Å—å—Ç–µ –ø–æ—Ä—Ç 25/2525 –≤ docker-compose –º–∏–º–æ nginx

#### –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –¥–æ–º–µ–Ω (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –¥–æ–º–µ–Ω–∞)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Compose** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –¥–æ–º–µ–Ω ‚Üí –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å ‚Üí **Send Test**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É **Queue** ‚Äî —Å—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å `sent`

> üì¨ –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ–º–µ–Ω, —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (fallback –Ω–∞ SMTP relay).

---

## üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env: API_BASE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω-–ø–∞–Ω–µ–ª–∏.com
python -m src.main
```

---

## ‚öôÔ∏è –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑. | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------|-----------|----------|
| `BOT_TOKEN` | ‚úÖ | ‚Äî | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ |
| `API_BASE_URL` | ‚úÖ | ‚Äî | URL API Remnawave |
| `API_TOKEN` | ‚úÖ | ‚Äî | –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ API |
| `ADMINS` | ‚úÖ | ‚Äî | ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `DEFAULT_LOCALE` | ‚Äî | `ru` | –Ø–∑—ã–∫ (`ru` / `en`) |
| `LOG_LEVEL` | ‚Äî | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |

### üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑. | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------|-----------|----------|
| `POSTGRES_USER` | ‚úÖ | ‚Äî | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å PostgreSQL |
| `POSTGRES_PASSWORD` | ‚úÖ | ‚Äî | –ü–∞—Ä–æ–ª—å PostgreSQL |
| `POSTGRES_DB` | ‚úÖ | ‚Äî | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `DATABASE_URL` | ‚úÖ | ‚Äî | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL |
| `SYNC_INTERVAL_SECONDS` | ‚Äî | `300` | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å API (—Å–µ–∫) |

### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `NOTIFICATIONS_CHAT_ID` | ID –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞ |
| `NOTIFICATIONS_TOPIC_ID` | –û–±—â–∏–π —Ç–æ–ø–∏–∫ (fallback) |
| `NOTIFICATIONS_TOPIC_USERS` | –¢–æ–ø–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `NOTIFICATIONS_TOPIC_NODES` | –¢–æ–ø–∏–∫ –¥–ª—è –Ω–æ–¥ |
| `NOTIFICATIONS_TOPIC_SERVICE` | –°–µ—Ä–≤–∏—Å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `NOTIFICATIONS_TOPIC_HWID` | HWID —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `NOTIFICATIONS_TOPIC_CRM` | –ë–∏–ª–ª–∏–Ω–≥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `NOTIFICATIONS_TOPIC_ERRORS` | –û—à–∏–±–∫–∏ |
| `NOTIFICATIONS_TOPIC_VIOLATIONS` | –ù–∞—Ä—É—à–µ–Ω–∏—è |

### üîó Webhook

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----------|----------|
| `WEBHOOK_SECRET` | ‚Äî | –ö–ª—é—á –ø—Ä–æ–≤–µ—Ä–∫–∏ webhook (HMAC-SHA256) |
| `WEBHOOK_PORT` | `8080` | –ü–æ—Ä—Ç webhook —Å–µ—Ä–≤–µ—Ä–∞ |

### üåç GeoIP (MaxMind GeoLite2)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑. | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------|-----------|----------|
| `MAXMIND_LICENSE_KEY` | ‚Äî | ‚Äî | –õ–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–π –∫–ª—é—á MaxMind (–±–µ—Å–ø–ª–∞—Ç–Ω–æ). –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω ‚Äî –±–∞–∑—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| `MAXMIND_CITY_DB` | ‚Äî | `/app/geoip/GeoLite2-City.mmdb` | –ü—É—Ç—å –∫ –±–∞–∑–µ GeoLite2-City |
| `MAXMIND_ASN_DB` | ‚Äî | `/app/geoip/GeoLite2-ASN.mmdb` | –ü—É—Ç—å –∫ –±–∞–∑–µ GeoLite2-ASN |

> **–ë–µ–∑ MaxMind** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ip-api.com (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω ~1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å).
> **–° MaxMind** ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞, –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ lookup'—ã, –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤.
>
> –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å:
> 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [maxmind.com/en/geolite2/signup](https://www.maxmind.com/en/geolite2/signup) (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
> 2. Account ‚Üí Manage License Keys ‚Üí Generate New License Key
> 3. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`: `MAXMIND_LICENSE_KEY=–≤–∞—à_–∫–ª—é—á`
> 4. –ë–∞–∑—ã —Å–∫–∞—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞

### üåê –í–µ–±-–ø–∞–Ω–µ–ª—å

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑.* | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|-----------|----------|
| `WEB_SECRET_KEY` | ‚úÖ | ‚Äî | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á JWT |
| `TELEGRAM_BOT_USERNAME` | ‚úÖ | ‚Äî | Username –±–æ—Ç–∞ (–±–µ–∑ @) |
| `WEB_CORS_ORIGINS` | ‚Äî | ‚Äî | –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã (CORS) |
| `WEB_JWT_EXPIRE_MINUTES` | ‚Äî | `30` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ access token (–º–∏–Ω) |
| `WEB_JWT_REFRESH_HOURS` | ‚Äî | `6` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ refresh token (—á) |
| `WEB_BACKEND_PORT` | ‚Äî | `8081` | –ü–æ—Ä—Ç –±—ç–∫–µ–Ω–¥–∞ |
| `WEB_FRONTEND_PORT` | ‚Äî | `3000` | –ü–æ—Ä—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ |
| `WEB_ALLOWED_IPS` | ‚Äî | ‚Äî | –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ IP (CIDR) |

*\* –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å `--profile web`*

### üìß –ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----------|----------|
| `MAIL_SERVER_ENABLED` | `false` | –í–∫–ª—é—á–∏—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä |
| `MAIL_INBOUND_PORT` | `2525` | –ü–æ—Ä—Ç –≤—Ö–æ–¥—è—â–µ–≥–æ SMTP-—Å–µ—Ä–≤–µ—Ä–∞ |
| `MAIL_SERVER_HOSTNAME` | `0.0.0.0` | IP –¥–ª—è SMTP-—Å–µ—Ä–≤–µ—Ä–∞ |

> üí° –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Äî fallback. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –∏–∑ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ (Settings ‚Üí –ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä).

---

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ |
| `/health` | –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã |
| `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–Ω–µ–ª–∏ |
| `/bandwidth` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ |
| `/config` | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| `/user <username\|id>` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ |
| `/node <uuid>` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–¥–µ |
| `/host <uuid>` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–æ—Å—Ç–µ |

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞: **—Ñ–∞–π–ª—ã** (–ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è) –∏ **–∫–æ–Ω—Å–æ–ª—å** (—Ç–æ–ª—å–∫–æ WARNING+).

| –§–∞–π–ª | –£—Ä–æ–≤–µ–Ω—å | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|------|---------|------------|
| `adminbot_INFO.log` | INFO+ | –í—Å—ë: API-–≤—ã–∑–æ–≤—ã, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –¥–µ–π—Å—Ç–≤–∏—è |
| `adminbot_WARNING.log` | WARNING+ | –ü—Ä–æ–±–ª–µ–º—ã: —Ç–∞–π–º–∞—É—Ç—ã, –æ—à–∏–±–∫–∏ |
| `web_INFO.log` | INFO+ | –õ–æ–≥–∏ –≤–µ–±-–±—ç–∫–µ–Ω–¥–∞ |
| `web_WARNING.log` | WARNING+ | –ü—Ä–æ–±–ª–µ–º—ã –≤–µ–±-–±—ç–∫–µ–Ω–¥–∞ |

–†–æ—Ç–∞—Ü–∏—è: 50 MB –Ω–∞ —Ñ–∞–π–ª, 5 –±—ç–∫–∞–ø–æ–≤ (gzip). –§–∞–π–ª—ã –≤ `./logs/`.

```bash
docker compose logs -f bot                    # Live-–ª–æ–≥–∏
tail -100 ./logs/adminbot_INFO.log            # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
remnawave-admin/
‚îú‚îÄ‚îÄ src/                        # Telegram-–±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ handlers/               # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (users, nodes, hosts, billing, ...)
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/              # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/               # API client, database, violation detector, webhook, ...
‚îÇ   ‚îî‚îÄ‚îÄ utils/                  # i18n, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ web/                        # –í–µ–±-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ frontend/               # React + TypeScript + Tailwind
‚îÇ   ‚îî‚îÄ‚îÄ backend/                # FastAPI –±—ç–∫–µ–Ω–¥
‚îú‚îÄ‚îÄ node-agent/                 # –ê–≥–µ–Ω—Ç —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –Ω–æ–¥
‚îú‚îÄ‚îÄ alembic/                    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ locales/                    # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (ru, en)
‚îî‚îÄ‚îÄ docker-compose.yml          # Docker Compose (–ø—Ä–æ—Ñ–∏–ª–∏: bot, web)
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| [CHANGELOG.md](CHANGELOG.md) | –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π |
| [WEBHOOK_SETUP.md](WEBHOOK_SETUP.md) | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook |
| [docs/anti-abuse.md](docs/anti-abuse.md) | Anti-Abuse —Å–∏—Å—Ç–µ–º–∞, –±–∞–∑–∞ ASN, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |
| [web/README.md](web/README.md) | –í–µ–±-–ø–∞–Ω–µ–ª—å: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏, API |
| [web/SECURITY_AUDIT.md](web/SECURITY_AUDIT.md) | –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ |
| [node-agent/README.md](node-agent/README.md) | Node Agent: —É—Å—Ç–∞–Ω–æ–≤–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, troubleshooting |

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
docker compose ps                    # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose logs -f bot           # –õ–æ–≥–∏
docker compose config                # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å API

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `API_BASE_URL` –∏ `API_TOKEN`
- Docker-—Å–µ—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `docker network ls | grep remnawave-network`

### –û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ

- Telegram ID –≤ `ADMINS`? –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot)

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

- `WEBHOOK_SECRET` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `WEBHOOK_SECRET_HEADER` –≤ –ø–∞–Ω–µ–ª–∏?
- URL webhook –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –ø–∞–Ω–µ–ª–∏?
- –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [WEBHOOK_SETUP.md](WEBHOOK_SETUP.md)

### –ü–æ—Ç–µ—Ä—è–Ω –¥–æ—Å—Ç—É–ø –∫ –≤–µ–±-–ø–∞–Ω–µ–ª–∏

–ï—Å–ª–∏ –≤—ã –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å, –∞ Telegram-–≤—Ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CLI-—É—Ç–∏–ª–∏—Ç—É `scripts/admin_cli.py`.

**–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å** (–±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –Ω–æ–≤—ã–π):

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py reset-password
```

–î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª—è:

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py reset-password --username myadmin
docker exec -it <container_name> python3 scripts/admin_cli.py reset-password --password 'MyNew$ecure1'
```

**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞:**

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py create-superadmin --username newadmin
```

**–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**

```bash
docker exec -it <container_name> python3 scripts/admin_cli.py list-admins
```

> –£—Ç–∏–ª–∏—Ç–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ PostgreSQL (—á–∏—Ç–∞–µ—Ç `DATABASE_URL` –∏–∑ `.env`), –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–π –≤–µ–±-–ø–∞–Ω–µ–ª–∏.

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É: `git checkout -b feature/amazing-feature`
3. Commit –∏ push
4. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. [LICENSE](LICENSE).

---

## üíñ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- [Issues –Ω–∞ GitHub](https://github.com/case211/remnawave-admin/issues)
- [Telegram-—á–∞—Ç](https://t.me/remnawave_admin)

–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞:
- TON: `UQDDe-jyFTbQsPHqyojdFeO1_m7uPF-q1w0g_MfbSOd3l1sC`
- USDT TRC20: `TGyHJj2PsYSUwkBbWdc7BFfsAxsE6SGGJP`
- BTC: `1J6Zz7XcrpFkchwFmuU5WTFYTxziBdSwRz`

---

<div align="center">

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ Remnawave

</div>
